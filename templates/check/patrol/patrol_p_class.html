{% extends 'base.html' %}
{% block content %}
    {% load your_custom_filters %}
    <div class="container-fluid">
        <div class="row">
            {% include 'check/patrol/patrol_menu.html' %}
            <div class="col-md-10 text-center" style="height: 70px;">
                <div class="row">
                    {#          6 x 10     첫번째 칸 #}
                    <div class="col-md-2 text-center">
                        {% for patrol in patrol_p %}
                            {% for num in line1 %}
                                {% if patrol.user.class_num == num %}
                                    {% with attendance=attendance_data|get_item:patrol.id %}
                                    {% if attendance.absent %}
                                        <div class="card mb-2" style="max-width: 12rem;">
                                            <button type="button" style="font-size:16px" class="btn btn-lg btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#exampleModal{{ patrol.id }}" d[...]
                                        </div>
                                        {% else %}
                                        <div class="card mb-2" style="max-width: 12rem;">
                                            <button type="button" style="font-size:16px" class="btn btn-lg btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal{{ patrol.id }}" data-bs-wha[...]
                                        </div>
                                    {% endif %}
                                    {% endwith %}
                                {% endif %}
                            {% endfor %}
                        {% endfor %}
                    </div>

                    {#          6 x 10     두번째 칸 #}
                    <div class="col-md-2 text-center">
                        {% for patrol in patrol_p %}
                            {% for num in line2 %}
                                {% if patrol.user.class_num == num %}
                                    {% with attendance=attendance_data|get_item:patrol.id %}
                                    {% if attendance.absent %}
                                        <div class="card mb-2" style="max-width: 12rem;">
                                            <button type="button" style="font-size:16px" class="btn btn-lg btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#exampleModal{{ patrol.id }}" d[...]
                                        </div>
                                        {% else %}
                                        <div class="card mb-2" style="max-width: 12rem;">
                                            <button type="button" style="font-size:16px" class="btn btn-lg btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal{{ patrol.id }}" data-bs-wha[...]
                                        </div>
                                    {% endif %}
                                    {% endwith %}
                                {% endif %}
                            {% endfor %}
                        {% endfor %}
                    </div>
                    {#          6 x 10     세번째 칸 #}
                    <div class="col-md-2 text-center">
                        {% for patrol in patrol_p %}
                            {% for num in line3 %}
                                {% if patrol.user.class_num == num %}
                                    {% with attendance=attendance_data|get_item:patrol.id %}
                                    {% if attendance.absent %}
                                        <div class="card mb-2" style="max-width: 12rem;">
                                            <button type="button" style="font-size:16px" class="btn btn-lg btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#exampleModal{{ patrol.id }}" d[...]
                                        </div>
                                        {% else %}
                                        <div class="card mb-2" style="max-width: 12rem;">
                                            <button type="button" style="font-size:16px" class="btn btn-lg btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal{{ patrol.id }}" data-bs-wha[...]
                                        </div>
                                    {% endif %}
                                    {% endwith %}
                                {% endif %}
                            {% endfor %}
                        {% endfor %}
                    </div>
                    {#          6 x 10     네번째 칸 #}
                    <div class="col-md-2 text-center">
                        {% for patrol in patrol_p %}
                            {% for num in line4 %}
                                {% if patrol.user.class_num == num %}
                                    {% with attendance=attendance_data|get_item:patrol.id %}
                                    {% if attendance.absent %}
                                        <div class="card mb-2" style="max-width: 12rem;">
                                            <button type="button" style="font-size:16px" class="btn btn-lg btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#exampleModal{{ patrol.id }}" d[...]
                                        </div>
                                        {% else %}
                                        <div class="card mb-2" style="max-width: 12rem;">
                                            <button type="button" style="font-size:16px" class="btn btn-lg btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal{{ patrol.id }}" data-bs-wha[...]
                                        </div>
                                    {% endif %}
                                    {% endwith %}
                                {% endif %}
                            {% endfor %}
                        {% endfor %}
                    </div>
                    {#          6 x 14     다섯번째 칸 #}
                    <div class="col-md-2 text-center">
                        {% for patrol in patrol_m %}
                            {% for num in line5 %}
                                {% if patrol.user.class_num == num %}
                                    {% with attendance=attendance_data|get_item:patrol.id %}
                                    {% if attendance.absent %}
                                        <div class="card mb-2" style="max-width: 12rem;">
                                            <button type="button" style="font-size:16px" class="btn btn-lg btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#exampleModal{{ patrol.id }}" d[...]
                                        </div>
                                        {% else %}
                                        <div class="card mb-2" style="max-width: 12rem;">
                                            <button type="button" style="font-size:16px" class="btn btn-lg btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal{{ patrol.id }}" data-bs-wha[...]
                                        </div>
                                    {% endif %}
                                    {% endwith %}
                                {% endif %}
                            {% endfor %}
                        {% endfor %}
                    </div>
                    {#          6 x 14     여섯번째 칸 #}
                    <div class="col-md-2 text-center">
                        {% for patrol in patrol_m %}
                            {% for num in range(15, 29) %}
                                {% if patrol.user.class_num == num %}
                                    {% with attendance=attendance_data|get_item:patrol.id %}
                                    {% if attendance.absent %}
                                        <div class="card mb-2" style="max-width: 12rem;">
                                            <button type="button" style="font-size:16px" class="btn btn-lg btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#exampleModal{{ patrol.id }}" d[...]
                                        </div>
                                        {% else %}
                                        <div class="card mb-2" style="max-width: 12rem;">
                                            <button type="button" style="font-size:16px" class="btn btn-lg btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal{{ patrol.id }}" data-bs-wha[...]
                                        </div>
                                    {% endif %}
                                    {% endwith %}
                                {% endif %}
                            {% endfor %}
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% for patrol in patrol_p %}
    <!-- 모달 템플릿 -->
    <div class="modal fade" id="exampleModal{{ patrol.id }}" tabindex="-1" aria-labelledby="exampleModalLabel{{ patrol.id }}" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title fs-5" id="exampleModalLabel{{ patrol.id }}">일일순찰 {{ patrol.user.class_name }}-{{ patrol.user.class_num }} {{ patrol.user.student }}</h3>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row mb-3">
                        <div class="col-md-7">
                            <form method="post" action="{% url 'check:patrol_check_p' patrol.id %}">
                                {% csrf_token %}
                                {#                    08:20 #}
                                <div class="row mb-2">
                                    <div class="col-md-2 d-flex align-items-center justify-content-center">
                                        <h5>08:50</h5>
                                    </div>
                                    <div class="col-md-5">
        {#                                <label for="time1_study{{ patrol.id }}"></label>#}
                                        <select class="form-control" name="time1_study{{ patrol.id }}" id="time1_study{{ patrol.id }}">
                                            <option value="">-- 학습과목 --</option>
                                            <option value="k_ss" {% if patrol.time1_study == "k_ss" %}selected{% endif %}>국어자습</option>
                                            <option value="k_il" {% if patrol.time1_study == "k_il" %}selected{% endif %}>국어인강</option>
                                            <option value="m_ss" {% if patrol.time1_study == "m_ss" %}selected{% endif %}>수학자습</option>
                                            <option value="m_il" {% if patrol.time1_study == "m_il" %}selected{% endif %}>수학인강</option>
                                            <option value="e_ss" {% if patrol.time1_study == "e_ss" %}selected{% endif %}>영어자습</option>
                                            <option value="e_il" {% if patrol.time1_study == "e_il" %}selected{% endif %}>영어인강</option>
                                            <option value="r_ss" {% if patrol.time1_study == "r_ss" %}selected{% endif %}>탐구자습</option>
                                            <option value="r_il" {% if patrol.time1_study == "r_il" %}selected{% endif %}>탐구인강</option>
                                            <option value="question" {% if patrol.time1_study == "question" %}selected{% endif %}>질의응답</option>
                                            <option value="mentoring" {% if patrol.time1_study == "mentoring" %}selected{% endif %}>멘토링</option>
                                            <option value="plan" {% if patrol.time1_study == "plan" %}selected{% endif %}>계획정리</option>
                                            <option value="consulting" {% if patrol.time1_study == "consulting" %}selected{% endif %}>상담</option>
                                            <option value="guitar" {% if patrol.time1_study == "guitar" %}selected{% endif %}>기타</option>
                                            <option value="sleep" {% if patrol.time1_study == "sleep" %}selected{% endif %}>수면</option>
                                            <!-- 나머지 옵션들 -->
                                        </select>
                                    </div>
                                    <div class="col-md-5">
        {#                                <label for="time1_focus{{ patrol.id }}">집중도</label>#}
                                        <select class="form-control" name="time1_focus{{ patrol.id }}" id="time1_focus{{ patrol.id }}">
                                            <option value="">-- 집중도 --</option>
                                            <option value="3" {% if patrol.time1_focus == "3" %}selected{% endif %}>3</option>
                                            <option value="2" {% if patrol.time1_focus == "2" %}selected{% endif %}>2</option>
                                            <option value="1" {% if patrol.time1_focus == "1" %}selected{% endif %}>1</option>
                                        </select>
                                    </div>
                                </div>
                            {#                    08:50 #}
                                <div class="row mb-3">
                                    <div class="col-md-2 d-flex align-items-center justify-content-center">
                                        <h5>09:20</h5>
                                    </div>
                                    <div class="col-md-5">
        {#                                <label for="time2_study{{ patrol.id }}"></label>#}
                                        <select class="form-control" name="time2_study{{ patrol.id }}" id="time2_study{{ patrol.id }}">
                                            <option value="">-- 학습과목 --</option>
                                            <option value="k_ss" {% if patrol.time2_study == "k_ss" %}selected{% endif %}>국어자습</option>
                                            <option value="k_il" {% if patrol.time2_study == "k_il" %}selected{% endif %}>국어인강</option>
                                            <option value="m_ss" {% if patrol.time2_study == "m_ss" %}selected{% endif %}>수학자습</option>
                                            <option value="m_il" {% if patrol.time2_study == "m_il" %}selected{% endif %}>수학인강</option>
                                            <option value="e_ss" {% if patrol.time2_study == "e_ss" %}selected{% endif %}>영어자습</option>
                                            <option value="e_il" {% if patrol.time2_study == "e_il" %}selected{% endif %}>영어인강</option>
                                            <option value="r_ss" {% if patrol.time2_study == "r_ss" %}selected{% endif %}>탐구자습</option>
                                            <option value="r_il" {% if patrol.time2_study == "r_il" %}selected{% endif %}>탐구인강</option>
                                            <option value="question" {% if patrol.time2_study == "question" %}selected{% endif %}>질의응답</option>
                                            <option value="mentoring" {% if patrol.time2_study == "mentoring" %}selected{% endif %}>멘토링</option>
                                            <option value="plan" {% if patrol.time2_study == "plan" %}selected{% endif %}>계획정리</option>
                                            <option value="consulting" {% if patrol.time2_study == "consulting" %}selected{% endif %}>상담</option>
                                            <option value="guitar" {% if patrol.time2_study == "guitar" %}selected{% endif %}>기타</option>
                                            <option value="sleep" {% if patrol.time2_study == "sleep" %}selected{% endif %}>수면</option>
                                            <!-- 나머지 옵션들 -->
                                        </select>
                                    </div>
                                    <div class="col-md-5">
        {#                                <label for="time2_focus{{ patrol.id }}">집중도</label>#}
                                        <select class="form-control" name="time2_focus{{ patrol.id }}" id="time2_focus{{ patrol.id }}">
                                            <option value="">-- 집중도 --</option>
                                            <option value="3" {% if patrol.time2_focus == "3" %}selected{% endif %}>3</option>
                                            <option value="2" {% if patrol.time2_focus == "2" %}selected{% endif %}>2</option>
                                            <option value="1" {% if patrol.time2_focus == "1" %}selected{% endif %}>1</option>
                                        </select>
                                    </div>
                                </div>
                            {#                    09:40 #}
                                <div class="row mb-3">
                                    <div class="col-md-2 d-flex align-items-center justify-content-center">
                                        <h5>09:50</h5>
                                    </div>
                                    <div class="col-md-5">
        {#                                <label for="time3_study{{ patrol.id }}">09:40 - 학습과목</label>#}
                                        <select class="form-control" name="time3_study{{ patrol.id }}" id="time3_study{{ patrol.id }}">
                                            <option value="">-- 학습과목 --</option>
                                            <option value="k_ss" {% if patrol.time3_study == "k_ss" %}selected{% endif %}>국어자습</option>
                                            <option value="k_il" {% if patrol.time3_study == "k_il" %}selected{% endif %}>국어인강</option>
                                            <option value="m_ss" {% if patrol.time3_study == "m_ss" %}selected{% endif %}>수학자습</option>
                                            <option value="m_il" {% if patrol.time3_study == "m_il" %}selected{% endif %}>수학인강</option>
                                            <option value="e_ss" {% if patrol.time3_study == "e_ss" %}selected{% endif %}>영어자습</option>
                                            <option value="e_il" {% if patrol.time3_study == "e_il" %}selected{% endif %}>영어인강</option>
                                            <option value="r_ss" {% if patrol.time3_study == "r_ss" %}selected{% endif %}>탐구자습</option>
                                            <option value="r_il" {% if patrol.time3_study == "r_il" %}selected{% endif %}>탐구인강</option>
                                            <option value="question" {% if patrol.time3_study == "question" %}selected{% endif %}>질의응답</option>
                                            <option value="mentoring" {% if patrol.time3_study == "mentoring" %}selected{% endif %}>멘토링</option>
                                            <option value="plan" {% if patrol.time3_study == "plan" %}selected{% endif %}>계획정리</option>
                                            <option value="consulting" {% if patrol.time3_study == "consulting" %}selected{% endif %}>상담</option>
                                            <option value="guitar" {% if patrol.time3_study == "guitar" %}selected{% endif %}>기타</option>
                                            <option value="sleep" {% if patrol.time3_study == "sleep" %}selected{% endif %}>수면</option>
                                            <!-- 나머지 옵션들 -->
                                        </select>
                                    </div>
                                    <div class="col-md-5">
        {#                                <label for="time3_focus{{ patrol.id }}">집중도</label>#}
                                        <select class="form-control" name="time3_focus{{ patrol.id }}" id="time3_focus{{ patrol.id }}">
                                            <option value="">-- 집중도 --</option>
                                            <option value="3" {% if patrol.time3_focus == "3" %}selected{% endif %}>3</option>
                                            <option value="2" {% if patrol.time3_focus == "2" %}selected{% endif %}>2</option>
                                            <option value="1" {% if patrol.time3_focus == "1" %}selected{% endif %}>1</option>
                                        </select>
                                    </div>
                                </div